# ========================
# User Queries
# ========================
type Query {
  "Get current authenticated user"
  me: User!
    @field(resolver: "App\\GraphQL\\Queries\\Auth\\Me")

  "Find a single user by an identifying attribute."
  user(
    id: ID @eq @rules(apply: ["prohibits:email", "required_without:email"])
    email: String @eq @rules(apply: ["prohibits:id", "required_without:id", "email"])
  ): User @find

  "List multiple users."
  users(
    first_name: String @where(operator: "like")
  ): [User!]! @paginate(defaultCount: 10)
}

# ========================
# User Type
# ========================
type User {
  id: ID!
  first_name: String!
  last_name: String!
  username: String!
  email: String!
  full_name: String @method(name: "getFullName")
  avatar_url: String
  email_verified_at: DateTime
  created_at: DateTime!
  updated_at: DateTime!
}
